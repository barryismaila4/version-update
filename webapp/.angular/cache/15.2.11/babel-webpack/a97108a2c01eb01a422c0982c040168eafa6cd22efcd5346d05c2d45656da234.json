{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/plant.service\";\nimport * as i2 from \"../../services/notification.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction PlantsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function PlantsComponent_div_5_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.savePlant());\n    });\n    i0.ɵɵelementStart(4, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function PlantsComponent_div_5_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.newPlant.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function PlantsComponent_div_5_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.newPlant.plantType = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"textarea\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function PlantsComponent_div_5_Template_textarea_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.newPlant.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 11);\n    i0.ɵɵtext(8, \"Sauvegarder\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_5_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.cancelForm());\n    });\n    i0.ɵɵtext(10, \"Annuler\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.editingPlant ? \"Modifier\" : \"Ajouter\", \" une plante\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newPlant.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newPlant.plantType);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newPlant.description);\n  }\n}\nfunction PlantsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_7_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const plant_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.showPlantDetails(plant_r9));\n    });\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 14)(6, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_7_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const plant_r9 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.showEditForm(plant_r9));\n    });\n    i0.ɵɵtext(7, \"Modifier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_7_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const plant_r9 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.waterPlant(plant_r9.id));\n    });\n    i0.ɵɵtext(9, \"Arroser\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_7_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const plant_r9 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.deletePlant(plant_r9.id));\n    });\n    i0.ɵɵtext(11, \"Supprimer\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const plant_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(plant_r9.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(plant_r9.plantType);\n  }\n}\nfunction PlantsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\")(4, \"strong\");\n    i0.ɵɵtext(5, \"Type:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\")(8, \"strong\");\n    i0.ɵɵtext(9, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n    i0.ɵɵtext(13, \"Dernier arrosage:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_8_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.selectedPlant = null);\n    });\n    i0.ɵɵtext(17, \"Fermer\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"D\\u00E9tails de \", ctx_r2.selectedPlant.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedPlant.plantType, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedPlant.description, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(15, 4, ctx_r2.selectedPlant.lastWatered), \"\");\n  }\n}\nexport class PlantsComponent {\n  constructor(plantService, notificationService, router) {\n    this.plantService = plantService;\n    this.notificationService = notificationService;\n    this.router = router;\n    this.plants = [];\n    this.selectedPlant = null;\n    this.showForm = false;\n    this.editingPlant = null;\n    this.newPlant = {\n      id: 0,\n      name: '',\n      description: '',\n      plantType: '',\n      user: undefined\n    };\n  }\n  ngOnInit() {\n    this.loadPlants();\n  }\n  loadPlants() {\n    this.plantService.getUserPlants().subscribe(plants => {\n      this.plants = plants;\n      // Charge les notifications pour chaque plante\n      this.plants.forEach(plant => {\n        if (plant.id) {\n          this.notificationService.getPlantNotifications(plant.id).subscribe(notifications => {\n            plant.notifications = notifications;\n          });\n        }\n      });\n    });\n  }\n  showPlantDetails(plant) {\n    this.selectedPlant = plant;\n  }\n  showAddForm() {\n    this.showForm = true;\n    this.editingPlant = null;\n    this.newPlant = {\n      id: 0,\n      name: '',\n      description: '',\n      plantType: '',\n      user: undefined\n    };\n  }\n  showEditForm(plant) {\n    this.showForm = true;\n    this.editingPlant = plant;\n    this.newPlant = {\n      ...plant\n    };\n  }\n  savePlant() {\n    if (this.editingPlant) {\n      this.plantService.updatePlant(this.editingPlant.id, this.newPlant).subscribe(() => {\n        this.loadPlants();\n        this.cancelForm();\n      });\n    } else {\n      this.plantService.createPlant(this.newPlant).subscribe(() => {\n        this.loadPlants();\n        this.cancelForm();\n      });\n    }\n  }\n  deletePlant(id) {\n    if (confirm('Supprimer cette plante?')) {\n      this.plantService.deletePlant(id).subscribe(() => {\n        this.loadPlants();\n        this.selectedPlant = null;\n      });\n    }\n  }\n  waterPlant(id) {\n    this.plantService.waterPlant(id).subscribe(() => {\n      this.loadPlants();\n      if (this.selectedPlant?.id === id) {\n        this.selectedPlant.lastWatered = new Date().toISOString();\n      }\n    });\n  }\n  addNotificationToPlant(plant) {\n    this.router.navigate(['/dashboard/notifications'], {\n      queryParams: {\n        plantId: plant.id\n      }\n    });\n  }\n  markNotificationAsRead(notificationId) {\n    this.notificationService.markAsRead(notificationId).subscribe(() => {\n      this.loadPlants();\n    });\n  }\n  cancelForm() {\n    this.showForm = false;\n    this.editingPlant = null;\n    this.newPlant = {\n      id: 0,\n      name: '',\n      description: '',\n      plantType: '',\n      user: undefined\n    };\n  }\n  static {\n    this.ɵfac = function PlantsComponent_Factory(t) {\n      return new (t || PlantsComponent)(i0.ɵɵdirectiveInject(i1.PlantService), i0.ɵɵdirectiveInject(i2.NotificationService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PlantsComponent,\n      selectors: [[\"app-plants\"]],\n      decls: 9,\n      vars: 3,\n      consts: [[1, \"plants-container\"], [3, \"click\"], [\"class\", \"plant-form\", 4, \"ngIf\"], [1, \"plants-list\"], [\"class\", \"plant-item\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"plant-details\", 4, \"ngIf\"], [1, \"plant-form\"], [3, \"ngSubmit\"], [\"name\", \"name\", \"placeholder\", \"Nom\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"plantType\", \"placeholder\", \"Type\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"description\", \"placeholder\", \"Description\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\"], [\"type\", \"button\", 3, \"click\"], [1, \"plant-item\", 3, \"click\"], [1, \"actions\"], [1, \"plant-details\"]],\n      template: function PlantsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Mes Plantes\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"button\", 1);\n          i0.ɵɵlistener(\"click\", function PlantsComponent_Template_button_click_3_listener() {\n            return ctx.showAddForm();\n          });\n          i0.ɵɵtext(4, \"Ajouter une plante\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, PlantsComponent_div_5_Template, 11, 4, \"div\", 2);\n          i0.ɵɵelementStart(6, \"div\", 3);\n          i0.ɵɵtemplate(7, PlantsComponent_div_7_Template, 12, 2, \"div\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(8, PlantsComponent_div_8_Template, 18, 6, \"div\", 5);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.showForm);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.plants);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedPlant);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm, i4.DatePipe],\n      styles: [\".plants-container[_ngcontent-%COMP%] {\\r\\n  max-width: 1200px;\\r\\n  margin: 0 auto;\\r\\n  padding: 2rem;\\r\\n}\\r\\n\\r\\n.plants-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\r\\n  color: #2d5016;\\r\\n  margin-bottom: 2rem;\\r\\n}\\r\\n\\r\\n.plants-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  background-color: #4CAF50;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 10px 20px;\\r\\n  border-radius: 4px;\\r\\n  cursor: pointer;\\r\\n  margin-bottom: 2rem;\\r\\n}\\r\\n\\r\\n.plant-form[_ngcontent-%COMP%] {\\r\\n  background: white;\\r\\n  padding: 2rem;\\r\\n  border-radius: 8px;\\r\\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\\r\\n  margin-bottom: 2rem;\\r\\n}\\r\\n\\r\\n.plant-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 1rem;\\r\\n  color: #2d5016;\\r\\n}\\r\\n\\r\\n.plant-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .plant-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 8px;\\r\\n  margin-bottom: 1rem;\\r\\n  border: 1px solid #ddd;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.plant-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\r\\n  height: 100px;\\r\\n  resize: vertical;\\r\\n}\\r\\n\\r\\n.plant-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  margin-right: 1rem;\\r\\n}\\r\\n\\r\\n.plants-list[_ngcontent-%COMP%] {\\r\\n  display: grid;\\r\\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\\r\\n  gap: 1rem;\\r\\n}\\r\\n\\r\\n.plant-item[_ngcontent-%COMP%] {\\r\\n  background: white;\\r\\n  padding: 1.5rem;\\r\\n  border-radius: 8px;\\r\\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\\r\\n  cursor: pointer;\\r\\n  transition: transform 0.2s;\\r\\n}\\r\\n\\r\\n.plant-item[_ngcontent-%COMP%]:hover {\\r\\n  transform: translateY(-2px);\\r\\n}\\r\\n\\r\\n.plant-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\\r\\n  color: #2d5016;\\r\\n  margin-bottom: 0.5rem;\\r\\n}\\r\\n\\r\\n.actions[_ngcontent-%COMP%] {\\r\\n  margin-top: 1rem;\\r\\n  display: flex;\\r\\n  gap: 0.5rem;\\r\\n}\\r\\n\\r\\n.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  padding: 5px 10px;\\r\\n  font-size: 0.8rem;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\n.plant-details[_ngcontent-%COMP%] {\\r\\n  background: white;\\r\\n  padding: 2rem;\\r\\n  border-radius: 8px;\\r\\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\\r\\n  margin-top: 2rem;\\r\\n}\\r\\n\\r\\n.plant-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\r\\n  color: #2d5016;\\r\\n  margin-bottom: 1rem;\\r\\n}\\r\\n\\r\\n.plant-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 0.5rem;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wbGFudHMvcGxhbnRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQkFBaUI7RUFDakIsY0FBYztFQUNkLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtFQUNaLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixzQ0FBc0M7RUFDdEMsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixzQkFBc0I7RUFDdEIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYiw0REFBNEQ7RUFDNUQsU0FBUztBQUNYOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsc0NBQXNDO0VBQ3RDLGVBQWU7RUFDZiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxjQUFjO0VBQ2QscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsaUJBQWlCO0VBQ2pCLFNBQVM7QUFDWDs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLHNDQUFzQztFQUN0QyxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UscUJBQXFCO0FBQ3ZCIiwic291cmNlc0NvbnRlbnQiOlsiLnBsYW50cy1jb250YWluZXIge1xyXG4gIG1heC13aWR0aDogMTIwMHB4O1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG4gIHBhZGRpbmc6IDJyZW07XHJcbn1cclxuXHJcbi5wbGFudHMtY29udGFpbmVyIGgyIHtcclxuICBjb2xvcjogIzJkNTAxNjtcclxuICBtYXJnaW4tYm90dG9tOiAycmVtO1xyXG59XHJcblxyXG4ucGxhbnRzLWNvbnRhaW5lciBidXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM0Q0FGNTA7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBtYXJnaW4tYm90dG9tOiAycmVtO1xyXG59XHJcblxyXG4ucGxhbnQtZm9ybSB7XHJcbiAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgcGFkZGluZzogMnJlbTtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMSk7XHJcbiAgbWFyZ2luLWJvdHRvbTogMnJlbTtcclxufVxyXG5cclxuLnBsYW50LWZvcm0gaDMge1xyXG4gIG1hcmdpbi1ib3R0b206IDFyZW07XHJcbiAgY29sb3I6ICMyZDUwMTY7XHJcbn1cclxuXHJcbi5wbGFudC1mb3JtIGlucHV0LCAucGxhbnQtZm9ybSB0ZXh0YXJlYSB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcGFkZGluZzogOHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDFyZW07XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbn1cclxuXHJcbi5wbGFudC1mb3JtIHRleHRhcmVhIHtcclxuICBoZWlnaHQ6IDEwMHB4O1xyXG4gIHJlc2l6ZTogdmVydGljYWw7XHJcbn1cclxuXHJcbi5wbGFudC1mb3JtIGJ1dHRvbiB7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxcmVtO1xyXG59XHJcblxyXG4ucGxhbnRzLWxpc3Qge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMzAwcHgsIDFmcikpO1xyXG4gIGdhcDogMXJlbTtcclxufVxyXG5cclxuLnBsYW50LWl0ZW0ge1xyXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDEuNXJlbTtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMSk7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzO1xyXG59XHJcblxyXG4ucGxhbnQtaXRlbTpob3ZlciB7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xyXG59XHJcblxyXG4ucGxhbnQtaXRlbSBoNCB7XHJcbiAgY29sb3I6ICMyZDUwMTY7XHJcbiAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xyXG59XHJcblxyXG4uYWN0aW9ucyB7XHJcbiAgbWFyZ2luLXRvcDogMXJlbTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogMC41cmVtO1xyXG59XHJcblxyXG4uYWN0aW9ucyBidXR0b24ge1xyXG4gIHBhZGRpbmc6IDVweCAxMHB4O1xyXG4gIGZvbnQtc2l6ZTogMC44cmVtO1xyXG4gIG1hcmdpbjogMDtcclxufVxyXG5cclxuLnBsYW50LWRldGFpbHMge1xyXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDJyZW07XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjEpO1xyXG4gIG1hcmdpbi10b3A6IDJyZW07XHJcbn1cclxuXHJcbi5wbGFudC1kZXRhaWxzIGgzIHtcclxuICBjb2xvcjogIzJkNTAxNjtcclxuICBtYXJnaW4tYm90dG9tOiAxcmVtO1xyXG59XHJcblxyXG4ucGxhbnQtZGV0YWlscyBwIHtcclxuICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","PlantsComponent","constructor","plantService","notificationService","router","id","name","description","plantType","user","undefined","ngOnInit","loadPlants","getUserPlants","subscribe","plants","forEach","plant","getPlantNotifications","notifications","showPlantDetails","selectedPlant","showAddForm","showForm","editingPlant","newPlant","showEditForm","savePlant","updatePlant","cancelForm","createPlant","deletePlant","confirm","waterPlant","lastWatered","Date","toISOString","addNotificationToPlant","navigate","queryParams","plantId","markNotificationAsRead","notificationId","markAsRead","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\htismaila4\\Desktop\\Devops\\agrotrackwebapp\\src\\app\\components\\plants\\plants.component.html","C:\\Users\\htismaila4\\Desktop\\Devops\\agrotrackwebapp\\src\\app\\components\\plants\\plants.component.ts"],"sourcesContent":["<div class=\"plants-container\">\n  <h2>Mes Plantes</h2>\n\n  <button (click)=\"showAddForm()\">Ajouter une plante</button>\n\n  <div *ngIf=\"showForm\" class=\"plant-form\">\n    <h3>{{editingPlant ? 'Modifier' : 'Ajouter'}} une plante</h3>\n    <form (ngSubmit)=\"savePlant()\">\n      <input [(ngModel)]=\"newPlant.name\" name=\"name\" placeholder=\"Nom\" required>\n      <input [(ngModel)]=\"newPlant.plantType\" name=\"plantType\" placeholder=\"Type\">\n      <textarea [(ngModel)]=\"newPlant.description\" name=\"description\" placeholder=\"Description\"></textarea>\n      <button type=\"submit\">Sauvegarder</button>\n      <button type=\"button\" (click)=\"cancelForm()\">Annuler</button>\n    </form>\n  </div>\n\n  <div class=\"plants-list\">\n    <div *ngFor=\"let plant of plants\" class=\"plant-item\" (click)=\"showPlantDetails(plant)\">\n      <h4>{{plant.name}}</h4>\n      <p>{{plant.plantType}}</p>\n      <div class=\"actions\">\n        <button (click)=\"showEditForm(plant)\">Modifier</button>\n        <button (click)=\"waterPlant(plant.id)\">Arroser</button>\n        <button (click)=\"deletePlant(plant.id)\">Supprimer</button>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf=\"selectedPlant\" class=\"plant-details\">\n    <h3>Détails de {{selectedPlant.name}}</h3>\n    <p><strong>Type:</strong> {{selectedPlant.plantType}}</p>\n    <p><strong>Description:</strong> {{selectedPlant.description}}</p>\n    <p><strong>Dernier arrosage:</strong> {{selectedPlant.lastWatered | date}}</p>\n    <button (click)=\"selectedPlant = null\">Fermer</button>\n  </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Plant } from '../../models/plant';\nimport { PlantService } from '../../services/plant.service';\nimport { NotificationService } from '../../services/notification.service';\n\n@Component({\n  selector: 'app-plants',\n  templateUrl: './plants.component.html',\n  styleUrls: ['./plants.component.css']\n})\nexport class PlantsComponent implements OnInit {\n  plants: Plant[] = [];\n  selectedPlant: Plant | null = null;\n  showForm = false;\n  editingPlant: Plant | null = null;\n  newPlant: Plant = {\n    id: 0,\n    name: '',\n    description: '',\n    plantType: '',\n    user: undefined\n  };\n\n  constructor(\n    private plantService: PlantService,\n    private notificationService: NotificationService,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.loadPlants();\n  }\n\n  loadPlants() {\n    this.plantService.getUserPlants().subscribe(plants => {\n      this.plants = plants;\n      // Charge les notifications pour chaque plante\n      this.plants.forEach(plant => {\n        if (plant.id) {\n          this.notificationService.getPlantNotifications(plant.id).subscribe(notifications => {\n            plant.notifications = notifications;\n          });\n        }\n      });\n    });\n  }\n\n  showPlantDetails(plant: Plant) {\n    this.selectedPlant = plant;\n  }\n\n  showAddForm() {\n    this.showForm = true;\n    this.editingPlant = null;\n    this.newPlant = {\n      id: 0,\n      name: '',\n      description: '',\n      plantType: '',\n      user: undefined\n    };\n  }\n\n  showEditForm(plant: Plant) {\n    this.showForm = true;\n    this.editingPlant = plant;\n    this.newPlant = { ...plant };\n  }\n\n  savePlant() {\n    if (this.editingPlant) {\n      this.plantService.updatePlant(this.editingPlant.id, this.newPlant).subscribe(() => {\n        this.loadPlants();\n        this.cancelForm();\n      });\n    } else {\n      this.plantService.createPlant(this.newPlant).subscribe(() => {\n        this.loadPlants();\n        this.cancelForm();\n      });\n    }\n  }\n\n  deletePlant(id: number) {\n    if (confirm('Supprimer cette plante?')) {\n      this.plantService.deletePlant(id).subscribe(() => {\n        this.loadPlants();\n        this.selectedPlant = null;\n      });\n    }\n  }\n\n  waterPlant(id: number) {\n    this.plantService.waterPlant(id).subscribe(() => {\n      this.loadPlants();\n      if (this.selectedPlant?.id === id) {\n        this.selectedPlant.lastWatered = new Date().toISOString();\n      }\n    });\n  }\n\n  addNotificationToPlant(plant: Plant) {\n    this.router.navigate(['/dashboard/notifications'], {\n      queryParams: { plantId: plant.id }\n    });\n  }\n\n  markNotificationAsRead(notificationId: number) {\n    this.notificationService.markAsRead(notificationId).subscribe(() => {\n      this.loadPlants();\n    });\n  }\n\n  cancelForm() {\n    this.showForm = false;\n    this.editingPlant = null;\n    this.newPlant = {\n      id: 0,\n      name: '',\n      description: '',\n      plantType: '',\n      user: undefined\n    };\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}