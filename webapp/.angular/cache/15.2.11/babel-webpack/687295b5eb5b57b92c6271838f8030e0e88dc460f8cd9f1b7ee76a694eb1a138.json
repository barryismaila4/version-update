{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/plant.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction PlantsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function PlantsComponent_div_5_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.savePlant());\n    });\n    i0.ɵɵelementStart(4, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function PlantsComponent_div_5_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.newPlant.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function PlantsComponent_div_5_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.newPlant.plantType = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"textarea\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function PlantsComponent_div_5_Template_textarea_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.newPlant.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 11);\n    i0.ɵɵtext(8, \"Sauvegarder\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_5_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.cancelForm());\n    });\n    i0.ɵɵtext(10, \"Annuler\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.editingPlant ? \"Modifier\" : \"Ajouter\", \" une plante\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newPlant.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newPlant.plantType);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newPlant.description);\n  }\n}\nfunction PlantsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_7_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const plant_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.showPlantDetails(plant_r9));\n    });\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 14)(6, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_7_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const plant_r9 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.showEditForm(plant_r9));\n    });\n    i0.ɵɵtext(7, \"Modifier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_7_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const plant_r9 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.waterPlant(plant_r9.id));\n    });\n    i0.ɵɵtext(9, \"Arroser\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_7_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const plant_r9 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.deletePlant(plant_r9.id));\n    });\n    i0.ɵɵtext(11, \"Supprimer\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const plant_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(plant_r9.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(plant_r9.plantType);\n  }\n}\nfunction PlantsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\")(4, \"strong\");\n    i0.ɵɵtext(5, \"Type:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\")(8, \"strong\");\n    i0.ɵɵtext(9, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n    i0.ɵɵtext(13, \"Dernier arrosage:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function PlantsComponent_div_8_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.selectedPlant = null);\n    });\n    i0.ɵɵtext(17, \"Fermer\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"D\\u00E9tails de \", ctx_r2.selectedPlant.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedPlant.plantType, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedPlant.description, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(15, 4, ctx_r2.selectedPlant.lastWatered), \"\");\n  }\n}\nexport class PlantsComponent {\n  constructor(plantService) {\n    this.plantService = plantService;\n    this.plants = [];\n    this.selectedPlant = null;\n    this.showForm = false;\n    this.editingPlant = null;\n    this.newPlant = {\n      id: 0,\n      name: '',\n      description: '',\n      plantType: '',\n      userId: 0\n    };\n  }\n  ngOnInit() {\n    this.loadPlants();\n  }\n  loadPlants() {\n    this.plantService.getUserPlants().subscribe(plants => {\n      this.plants = plants;\n    });\n  }\n  showPlantDetails(plant) {\n    this.selectedPlant = plant;\n  }\n  showAddForm() {\n    this.showForm = true;\n    this.editingPlant = null;\n    this.newPlant = {\n      id: 0,\n      name: '',\n      description: '',\n      plantType: '',\n      userId: 0\n    };\n  }\n  showEditForm(plant) {\n    this.showForm = true;\n    this.editingPlant = plant;\n    this.newPlant = {\n      ...plant\n    };\n  }\n  savePlant() {\n    if (this.editingPlant) {\n      this.plantService.updatePlant(this.editingPlant.id, this.newPlant).subscribe(() => {\n        this.loadPlants();\n        this.cancelForm();\n      });\n    } else {\n      this.plantService.createPlant(this.newPlant).subscribe(() => {\n        this.loadPlants();\n        this.cancelForm();\n      });\n    }\n  }\n  deletePlant(id) {\n    if (confirm('Supprimer cette plante?')) {\n      this.plantService.deletePlant(id).subscribe(() => {\n        this.loadPlants();\n        this.selectedPlant = null;\n      });\n    }\n  }\n  waterPlant(id) {\n    this.plantService.waterPlant(id).subscribe(() => {\n      this.loadPlants();\n      if (this.selectedPlant?.id === id) {\n        this.selectedPlant.lastWatered = new Date().toISOString();\n      }\n    });\n  }\n  cancelForm() {\n    this.showForm = false;\n    this.editingPlant = null;\n    this.newPlant = {\n      id: 0,\n      name: '',\n      description: '',\n      plantType: '',\n      userId: 0\n    };\n  }\n  static {\n    this.ɵfac = function PlantsComponent_Factory(t) {\n      return new (t || PlantsComponent)(i0.ɵɵdirectiveInject(i1.PlantService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PlantsComponent,\n      selectors: [[\"app-plants\"]],\n      decls: 9,\n      vars: 3,\n      consts: [[1, \"plants-container\"], [3, \"click\"], [\"class\", \"plant-form\", 4, \"ngIf\"], [1, \"plants-list\"], [\"class\", \"plant-item\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"plant-details\", 4, \"ngIf\"], [1, \"plant-form\"], [3, \"ngSubmit\"], [\"name\", \"name\", \"placeholder\", \"Nom\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"plantType\", \"placeholder\", \"Type\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"description\", \"placeholder\", \"Description\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\"], [\"type\", \"button\", 3, \"click\"], [1, \"plant-item\", 3, \"click\"], [1, \"actions\"], [1, \"plant-details\"]],\n      template: function PlantsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Mes Plantes\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"button\", 1);\n          i0.ɵɵlistener(\"click\", function PlantsComponent_Template_button_click_3_listener() {\n            return ctx.showAddForm();\n          });\n          i0.ɵɵtext(4, \"Ajouter une plante\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, PlantsComponent_div_5_Template, 11, 4, \"div\", 2);\n          i0.ɵɵelementStart(6, \"div\", 3);\n          i0.ɵɵtemplate(7, PlantsComponent_div_7_Template, 12, 2, \"div\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(8, PlantsComponent_div_8_Template, 18, 6, \"div\", 5);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.showForm);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.plants);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedPlant);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm, i2.DatePipe],\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","PlantsComponent","constructor","plantService","id","name","description","plantType","userId","ngOnInit","loadPlants","getUserPlants","subscribe","plants","showPlantDetails","plant","selectedPlant","showAddForm","showForm","editingPlant","newPlant","showEditForm","savePlant","updatePlant","cancelForm","createPlant","deletePlant","confirm","waterPlant","lastWatered","Date","toISOString","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\htismaila4\\Desktop\\Devops\\agrotrackwebapp\\src\\app\\components\\plants\\plants.component.html","C:\\Users\\htismaila4\\Desktop\\Devops\\agrotrackwebapp\\src\\app\\components\\plants\\plants.component.ts"],"sourcesContent":["<div class=\"plants-container\">\n  <h2>Mes Plantes</h2>\n\n  <button (click)=\"showAddForm()\">Ajouter une plante</button>\n\n  <div *ngIf=\"showForm\" class=\"plant-form\">\n    <h3>{{editingPlant ? 'Modifier' : 'Ajouter'}} une plante</h3>\n    <form (ngSubmit)=\"savePlant()\">\n      <input [(ngModel)]=\"newPlant.name\" name=\"name\" placeholder=\"Nom\" required>\n      <input [(ngModel)]=\"newPlant.plantType\" name=\"plantType\" placeholder=\"Type\">\n      <textarea [(ngModel)]=\"newPlant.description\" name=\"description\" placeholder=\"Description\"></textarea>\n      <button type=\"submit\">Sauvegarder</button>\n      <button type=\"button\" (click)=\"cancelForm()\">Annuler</button>\n    </form>\n  </div>\n\n  <div class=\"plants-list\">\n    <div *ngFor=\"let plant of plants\" class=\"plant-item\" (click)=\"showPlantDetails(plant)\">\n      <h4>{{plant.name}}</h4>\n      <p>{{plant.plantType}}</p>\n      <div class=\"actions\">\n        <button (click)=\"showEditForm(plant)\">Modifier</button>\n        <button (click)=\"waterPlant(plant.id)\">Arroser</button>\n        <button (click)=\"deletePlant(plant.id)\">Supprimer</button>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf=\"selectedPlant\" class=\"plant-details\">\n    <h3>Détails de {{selectedPlant.name}}</h3>\n    <p><strong>Type:</strong> {{selectedPlant.plantType}}</p>\n    <p><strong>Description:</strong> {{selectedPlant.description}}</p>\n    <p><strong>Dernier arrosage:</strong> {{selectedPlant.lastWatered | date}}</p>\n    <button (click)=\"selectedPlant = null\">Fermer</button>\n  </div>\n</div>","import { Component, OnInit } from '@angular/core';\n\nimport { PlantService } from '../../services/plant.service';\nimport { Plant } from 'src/app/models/plant';\n\n@Component({\n  selector: 'app-plants',\n  templateUrl: './plants.component.html',\n  styleUrls: ['./plants.component.css']\n})\nexport class PlantsComponent implements OnInit {\n  plants: Plant[] = [];\n  selectedPlant: Plant | null = null;\n  showForm = false;\n  editingPlant: Plant | null = null;\n  newPlant: Plant = { id: 0, name: '', description: '', plantType: '', userId: 0 };\n\n  constructor(private plantService: PlantService) {}\n\n  ngOnInit() {\n    this.loadPlants();\n  }\n\n  loadPlants() {\n    this.plantService.getUserPlants().subscribe(plants => {\n      this.plants = plants;\n    });\n  }\n\n  showPlantDetails(plant: Plant) {\n    this.selectedPlant = plant;\n  }\n\n  showAddForm() {\n    this.showForm = true;\n    this.editingPlant = null;\n    this.newPlant = { id: 0, name: '', description: '', plantType: '', userId: 0 };\n  }\n\n  showEditForm(plant: Plant) {\n    this.showForm = true;\n    this.editingPlant = plant;\n    this.newPlant = { ...plant };\n  }\n\n  savePlant() {\n    if (this.editingPlant) {\n      this.plantService.updatePlant(this.editingPlant.id, this.newPlant).subscribe(() => {\n        this.loadPlants();\n        this.cancelForm();\n      });\n    } else {\n      this.plantService.createPlant(this.newPlant).subscribe(() => {\n        this.loadPlants();\n        this.cancelForm();\n      });\n    }\n  }\n\n  deletePlant(id: number) {\n    if (confirm('Supprimer cette plante?')) {\n      this.plantService.deletePlant(id).subscribe(() => {\n        this.loadPlants();\n        this.selectedPlant = null;\n      });\n    }\n  }\n\n  waterPlant(id: number) {\n    this.plantService.waterPlant(id).subscribe(() => {\n      this.loadPlants();\n      if (this.selectedPlant?.id === id) {\n        this.selectedPlant.lastWatered = new Date().toISOString();\n      }\n    });\n  }\n\n  cancelForm() {\n    this.showForm = false;\n    this.editingPlant = null;\n    this.newPlant = { id: 0, name: '', description: '', plantType: '', userId: 0 };\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}